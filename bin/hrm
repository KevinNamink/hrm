#!/bin/bash
#
# HRM administration script

# hrm.conf defines variable HRM_DATA
. /etc/hrm.conf

create() {
	if [ ! -d "$HRM_DATA"/"$1" ]
	then
		sudo -u imagerie mkdir "$HRM_DATA"/"$1"
		sudo -u imagerie mkdir "$HRM_DATA"/"$1"/"$HRM_SOURCE"
		sudo -u imagerie mkdir "$HRM_DATA"/"$1"/"$HRM_DEST"
		# sudo -u imagerie chown -R "$2":users "$HRM_DATA"/"$1"
		sudo -u imagerie chmod -R 0777 "$HRM_DATA"/"$1"
	fi
}

delete() {
	if [ -d "$HRM_DATA"/"$1" ]
	then
		sudo -u imagerie rm -R "$HRM_DATA"/"$1"
	fi
}

case "$1" in
	create)
		create $2
		;;
	delete)
		delete $2
		;;
	*)
		echo $"Usage: $0 {create|delete} username"
esac
